'use strict';

const databaseImport = require('../../../server/data/database.js');

const testUtils = require('../../test-utils');
const movieFunctions = require('../../../server/functions/movie.js');
const accFunctions = require('../../../server/functions/accounts.js');
const profFunctions = require('../../../server/functions/profile.js');
const printInfo = testUtils.printInfo;
const printSuccess = testUtils.printSuccess;
const printWarning = testUtils.printWarning;
const printError = testUtils.printError;

const testJSObjectData = JSON.parse(`[         {             "id": "A34ba834d37851c826d079cff357c7582",             "name": "Lenette Scimonelli",             "mail": "lscimonelli0@blinklist.com",             "password_hash": "715bce46cfa0202cfe8e5291277d54d8",             "payment": {                 "type": "none"             },             "profiles": [                 {                     "id": "P61fc3b37de686e7d774c2eb3447ed5b4",                     "name": "Leia",                     "picture": "default.png",                     "statistics": {                         "total_watchtime": 320,                         "watchtime_by_genre": {                             "Drama": 161,                             "Family": 79,                             "Comedy": 58,                             "Western": 22                         },                         "likes": [                             "Me41b0468f95a0de4d7fd00ff204257a3",                             "Me41b0468f95a0de4d7fd00ff204257a3",                             "Me41b0468f95a0de4d7fd00ff204257a3",                             "M84044543efe563e290080e88be538f7e",                             "M6c96d6d7450b956a8ef4791b957ee01c",                             "M84044543efe563e290080e88be538f7e",                             "M6547018bb48527fc3946f04f230fd17c",                             "M6c96d6d7450b956a8ef4791b957ee01c",                             "M6c96d6d7450b956a8ef4791b957ee01c",                             "M6c96d6d7450b956a8ef4791b957ee01c",                             "M74e2d9ac82c9ab163847f5e09ee695cd"                         ],                         "likes_by_genre": {                             "Drama": 5,                             "Musical": 4,                             "Western": 1,                             "Adventure": 1                         }                     },                     "history": [                         {                             "id": "Me41b0468f95a0de4d7fd00ff204257a3",                             "last_timestamp": 100                         },                         {                             "id": "M1043ae62a82203074d06ad118958bbda",                             "last_timestamp": 79                         },                         {                             "id": "Me9566fcef127570d99fa9488f8cbae36",                             "last_timestamp": 61                         },                         {                             "id": "Mfbde1c3861c61d31f404d32b7e88e2e4",                             "last_timestamp": 54                         },                         {                             "id": "M1744170ee19f2708e56570df965c7640",                             "last_timestamp": 4                         },                         {                             "id": "Mbd38c4877047911b6f377f0103682a94",                             "last_timestamp": 22                         }                     ],                     "bookmarks": [                         "Md9a2c97cc098bf99db4f12372ae67f63",                         "Me89777ff5f4e4b7a120f76ebf6036966",                         "Mcdff825e96e3e3087062d38f00b589a8"                     ]                 }             ]         },         {             "id": "Aa560ae2243153c7f989bbec18558155c",             "name": "Murry O' Cuolahan",             "mail": "mo1@ca.gov",             "password_hash": "715bce46cfa0202cfe8e5291277d54d8",             "payment": {                 "type": "none"             },             "profiles": [                 {                     "id": "P2131a66a09d538cd7623a1c9f2bc9148",                     "name": "Filmore",                     "picture": "default.png",                     "statistics": {                         "total_watchtime": 206,                         "watchtime_by_genre": {                             "Drama": 100,                             "Comedy": 68,                             "Musical": 21,                             "Fantasy": 17                         },                         "likes": [                             "Me41b0468f95a0de4d7fd00ff204257a3",                             "M57a9db5e52967e45518f7931f631393a",                             "M5829d9d7a4c795f65d979c2af073c3dd",                             "M983af150b5f4ed2e199ce01acdab734e",                             "M6864a845fe4f5116542a0480ff08a5aa",                             "M57a9db5e52967e45518f7931f631393a",                             "M3e13db3b993a827914d353800b75e80d",                             "M0bcf45d93be81594a33a5aca4034c5ca",                             "Mb8d5e741a7effa8d93ba982598bbf33d",                             "Mf8a3bca8a29c139a8ce5b319c7a616ec"                         ],                         "likes_by_genre": {                             "Drama": 4,                             "Action": 3,                             "Comedy": 2,                             "Western": 1                         }                     },                     "history": [                         {                             "id": "Me41b0468f95a0de4d7fd00ff204257a3",                             "last_timestamp": 100                         },                         {                             "id": "M6a36b43febf580bf04b5c8cf1d0ef7d4",                             "last_timestamp": 68                         },                         {                             "id": "M93e283b352551178a8eead36f0b49e9e",                             "last_timestamp": 21                         },                         {                             "id": "M28c5ee5911d2ba8c1cece2ad82af2a0e",                             "last_timestamp": 17                         }                     ],                     "bookmarks": [                         "Mf288a017768d821b7894d3aaea5a2ba4",                         "M510aa38a04b5a51f0bd6a0d9e0c5c535",                         "Mf0916775c25cdcfd3e706377d8468d16",                         "M7617af79743d5cc4849d40cc6d1136b1"                     ]                 },                 {                     "id": "P0a87ab6c31d14183d5d12cbe4a30c9df",                     "name": "Fabiano",                     "picture": "default.png",                     "statistics": {                         "total_watchtime": 331,                         "watchtime_by_genre": {                             "Drama": 199,                             "Horror": 11,                             "Slasher": 48,                             "Western": 23,                             "Comedy": 50                         },                         "likes": [                             "Me41b0468f95a0de4d7fd00ff204257a3",                             "Mf8a3bca8a29c139a8ce5b319c7a616ec",                             "M5ae48d4fbd1d74aa67f6a4175680e15d",                             "M84044543efe563e290080e88be538f7e",                             "Mab7edc13a3270db1b8b3205a18e098c0",                             "M06412c0bf8e5e4ef6c96ae650125949f",                             "M0d3bf019f79157bbd844f16e6d44d4ac",                             "M985d364b00dc1198bbf50c8aa1aae6db"                         ],                         "likes_by_genre": {                             "Drama": 5,                             "Comedy": 3                         }                     },                     "history": [                         {                             "id": "Me41b0468f95a0de4d7fd00ff204257a3",                             "last_timestamp": 100                         },                         {                             "id": "M940909ba02c9e776a5f1fb337a3935d5",                             "last_timestamp": 75                         },                         {                             "id": "Meaf20b4b4375c25300c5af49200aca13",                             "last_timestamp": 24                         },                         {                             "id": "M126746758364b6b9e0fa662f90606aad",                             "last_timestamp": 11                         },                         {                             "id": "Mdae21edfc37e53fa200ed2772a9480f1",                             "last_timestamp": 48                         },                         {                             "id": "M3399e22f48e3b43270c88440e006b137",                             "last_timestamp": 23                         },                         {                             "id": "M49bbeb43fabc3f9924f63a8865635ed0",                             "last_timestamp": 50                         }                     ],                     "bookmarks": [                         "M85029a4b92b596b52857025db46a410a",                         "Me31d2d580c886cdd56f341437b6a5b91",                         "Mffdbe6c35e276e2d84bd8ab17f08c584"                     ]                 },                 {                     "id": "P1ab930a22ef6968e86295a59ed38411a",                     "name": "Leontine",                     "picture": "default.png",                     "statistics": {                         "total_watchtime": 256,                         "watchtime_by_genre": {                             "Drama": 197,                             "Adventure": 59                         },                         "likes": [                             "Me41b0468f95a0de4d7fd00ff204257a3",                             "M722fe8410272046ec275d0b071c1631b",                             "M5ae48d4fbd1d74aa67f6a4175680e15d",                             "Md4ab31944be855ddb8202f41015610db",                             "M74e2d9ac82c9ab163847f5e09ee695cd",                             "M4e3630231e732019ee159c538675a07a"                         ],                         "likes_by_genre": {                             "Drama": 1,                             "Romance": 1,                             "Comedy": 1,                             "Crime": 1,                             "Adventure": 1,                             "Musical": 1                         }                     },                     "history": [                         {                             "id": "Me41b0468f95a0de4d7fd00ff204257a3",                             "last_timestamp": 100                         },                         {                             "id": "Me1d0f57b6d115cc5cfbc876b7cd01951",                             "last_timestamp": 28                         },                         {                             "id": "M9ce8a141832b99ab50a0ca4d5f2deee1",                             "last_timestamp": 59                         },                         {                             "id": "Md58b5002132e209518ec6d19b5fd57ce",                             "last_timestamp": 69                         }                     ],                     "bookmarks": [                         "M39aa5c6fbce69d15b3c3db513ae80c90",                         "M928caae7bf549672f6235d25f86bf6b7",                         "Ma705084169c50a8d20629bfd04bf95ee",                         "M29b88c708f685d93bdd65ce50e3a8252"                     ]                 }             ]         }]`);

/**
 * Tests: createAccount
 */
function testCreateAccount() {
    function testCase1() {
        printInfo('Testing: createAccount1');
        var pre = false;
        if (Array.isArray(testJSObjectData) && (testJSObjectData.length === 2)) {
            pre = true;
        }

        const result = accFunctions.createAccount(testJSObjectData, "name", "mail", "password");

        if (pre && Array.isArray(result) && (result.length === 3) && (testJSObjectData.length === 3)) {
            return true;
        }
        return false;
    }

    function testCase2() {
        printInfo('Testing: createAccount2');

        const result = accFunctions.createAccount(testJSObjectData, "test test", " tset test mail");

        if (Array.isArray(result) && (result.length === 3) && testJSObjectData.length === 3) {
            return true;
        }
        return false;
    }



    if (testCase1()) {
        printSuccess(`Test: ... erfolgreich`);
    } else {
        printError(`Test: ... fehlgeschlagen`);
    }

    if (testCase2()) {
        printSuccess(`Test: ... erfolgreich`);
    } else {
        printError(`Test: ... fehlgeschlagen`);
    }
}

testCreateAccount();